<?xml version="1.0" encoding="windows-1251" ?> 
<r:report
	r:t="Структура затрат подразделения"
	r:assembly="Croc.IncidentTracker.ReportService.Layouts.dll"
	r:class="Croc.IncidentTracker.ReportService.Reports.r_DepartmentExpensesStructure" 
	
	xmlns:r="http://www.croc.ru/Schemas/XmlFramework/ReportService"
	xmlns:it="http://www.croc.ru/Schemas/IncidentTracker/ReportService"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	
	xsi:schemaLocation="
		http://www.croc.ru/Schemas/IncidentTracker/ReportService Croc.IncidentTracker.ReportService.xsd 
		http://www.croc.ru/Schemas/XmlFramework/ReportService Croc.XmlFramework.ReportService.xsd"
>
	<r:common>
		<r:style-class r:n="WARNING_MESSAGE_TABLE">border="0px solid"</r:style-class>
		<r:style-class r:n="WARNING_MESSAGE">
			font-family="Verdana" font-size="12pt" font-weight="bold" 
			color="#EE3322" 
			text-alight="left" vertical-align="middle" 
			padding-left="5px" padding-right="5px" padding-top="10px" padding-bottom="5px"
		</r:style-class>
		<r:script r:src="vbs/s-it-reports.vbs" r:language="vbscript" r:encoding="windows-1251"/>
	</r:common>
	
	<!-- 
		ПАРАМЕТРЫ ОТЧЕТА 
		Значения параметров задаются экземпляром ds-типа FilterReportDepartmentExpensesStructure;
		перечень и типы параметров, т.о., соответсвуют свойствам данного типа. Диалог задания 
		параметров реализуется редактором типа - см. определение в it-metadata-reports.xml
	-->
	<r:params>
		<!-- Форма отчета:
				0 - Суммарные данные подразделений, ПО УМОЛЧАНИЮ
				1 - Данные по каждому сотруднику подразделения
				2 - Данные по каждому сотруднику, с данными по заданиям -->
		<r:param r:n="ReportForm" r:vt="i4" r:required="1" r:default="0" />		
	
		<!-- Задание отчетного периода (возможно задание частично или полностью открытого периода) -->
		<r:param r:n="IntervalBegin" r:vt="date" />			<!-- Дата начала отчетного периода -->
		<r:param r:n="IntervalEnd" r:vt="date" />			<!-- Дата конца отчетного периода -->
		
		<!-- Определение базового набора - перечни идентификаторов подразделений / 
				организаций, по данным сотрудников которых формируются затраты -->
		<r:param r:n="Organizations" r:vt="string" />		<!-- Перечень идентификаторов организаций -->
		<r:param r:n="Departments" r:vt="string" />			<!-- Перечень идентификаторов подразделений -->
		
		<!-- Объем анализируемых данных:
				0 - Только указанные подразделения (организации);
				1 - Включать данные непосредственно подчиненных подразделений; 
				2 - Включать данные всех подчиненных подразделений, ПО УМОЛЧАНИЮ -->
		<r:param r:n="AnalysisDepth" r:vt="i4" r:default="2" />				
		
		<!-- Видимость опциональных колонок (колонка видна, если флаг задан):
				1 - Норма рабочего времени;
				2 - Дисбаланс;
				4 - Коэффициент утилизации;
				8 - Причины списания; -->
		<r:param r:n="ShownColumns" r:vt="i4" r:default="0" />
		
		<!-- Признак исключения данных сотрудников, уволенных на конец указанного отчетного периода -->
		<r:param r:n="PassRedundant" r:vt="boolean" r:default="1" />
		<!--Признак исключения данных нетрудоспособных сотрудников-->
		<r:param r:n="PassDisabled" r:vt="boolean" r:default="1"/>
		<!-- Форма предствления данных 
				0 - Время и проценты, ПО УМОЛЧАНИЮ;
				1 - Только время;
				2 - Только проценты; -->
		<r:param r:n="DataFormat" r:vt="i4" r:default="0" />		
		<!-- Флаг, определяющий способ расчета процентных отношений: если 0, то за 100% 
				берется сумма затрат по колонке; если 1 - то сумма затрат по строке -->
		<r:param r:n="ExpensesSumAsPercentBase" r:vt="i4" r:default="0" />	
		<!-- Представление времени:
				0 - Дни, часы, минуты; ПО УМОЛЧАНИЮ
				1 - Часы; -->
		<r:param r:n="TimeMeasureUnits" r:vt="i4" r:default="0" />	
		
		<!-- Виды активностей, затраты по которым рассматриваются как "внешние" 
				(требуется при расчете данных колонки "Коэффициент утилизации") -->
		<r:param r:n="ActivityTypesAsExternal" r:vt="string" />			
		
		<!-- Сортировка:
				0 - По подразделению / сотруднику; ПО УМОЛЧАНИЮ;
				1 - По трудозатратам;
				2 - По значению дисбаланса;
				3 - По значению коэффициента утилизации. -->
		<r:param r:n="SortingMode" r:vt="i4" r:default="0" />
		<!-- Признак группировки данных по подразделениям -->
		<r:param r:n="DoGroup" r:vt="boolean" r:default="1" />
		<!-- Признак включения в отчет условия поиска -->
		<r:param r:n="ShowRestrictions" r:vt="boolean" r:default="1" />
	</r:params>
	<r:data-sources>
		<!-- config-data-source выбран как наиболее простой тип, т.к. abstract не сериализует имена сборки и класса -->
		<r:config-data-source r:n="dsMain" r:assembly="Croc.IncidentTracker.ReportService.Layouts.dll" r:class="Croc.IncidentTracker.ReportService.Layouts.DataSources.DepartmentExpensesStructureMainDS" r:section=""/>
		<r:config-data-source r:n="dsExpencesCauses" r:assembly="Croc.IncidentTracker.ReportService.Layouts.dll" r:class="Croc.IncidentTracker.ReportService.Layouts.DataSources.DepartmentExpensesСausesDS" r:section=""/>
		<r:config-data-source r:n="dsOrganizationAndDepartments" r:assembly="Croc.IncidentTracker.ReportService.Layouts.dll" r:class="Croc.IncidentTracker.ReportService.Layouts.DataSources.DepartmentOrganizationsAndDepartmentsDS" r:section=""/>
	</r:data-sources>
</r:report>

